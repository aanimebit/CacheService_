# CacheService
## - Описание -
Проект представляет из себя набор API сервисов, организующих в базу данных _кэширование записей_ о задачах пользователей. 

В данном решении подразумевается, что _пользователи могут быть двух типов_, и под каждый из типов пользователей создан свой микросервис (_в данном случае соблюдены именно принципы микросервисной архитектуры_). 

В качестве базы данных в целях облегчения запуска приложения используется локальное хранение посредством ```EntityFrameworkCore.InMemory```. 


## - Модули -
- **Сущности (Entities)**. Представляют собой классы, содержащие необходимые для хранения поля. Один класс соответствует одной таблице в базе данных.
- **Сервисы (Services)**. Представляют собой реализации интерфейсов, содержащих методы взаимодействия с сущностями.
- **Контроллеры (Controllers)**. Предоставляют "ручки" для взаимодействия с приложением извне. Иными словами обработчики запросов по описанным ниже адресам.


## - API -
С детальным описанием API методов можно ознакомиться в Swagger, он запустится автоматически после запуска приложения.

UI будет доступен на _localhost:7250_ или же на _localhost:5160_, в зависимости от доступности этих портов.


## - Использование методов -
### ```GET /AdmUser/tasks/cache```
Возвращает JSON коллекцию с содержимым таблицы кеша для Adm пользователей.

#### Возвращаемая структура:

``` 
{
    id	            integer($int64)
    userId	    integer($int64)
    taskId	    integer($int64)
    categoryId	    integer($int64)
}
```
__________________________
### ```POST /AdmUser/tasks/cache/aggregation```
Заполняет/обновляет таблицу кеша для Adm пользователей в зависимости от входных данных.

В теле запроса необходимо передать ```int32 districtAvailable```.
__________________________
### ```GET /User/categories```
Возвращает JSON коллекцию с содержимым таблицы категорий обычных пользователей.

#### Возвращаемая структура:

``` 
{
    userId          integer($int64)
    categoryId	    integer($int64)
}
```
__________________________
### ```POST /User/categories/add```
Добавляет запись в таблицу категорий обычных пользователей. 

#### body:
```json 
{
  "userId": 0,
  "categoryId": 0
}
```
__________________________
### ```GET /User/tasks/responsibilities```
Возвращает JSON коллекцию с содержимым таблицы, связывающей обычного пользователя с задачами.

#### Возвращаемая структура:

``` 
{
    id	            integer($int64)
    userId	    integer($int64)
    taskId	    integer($int64)
}
```
__________________________
### ```POST /User/tasks/responsibilities/fill```
Вызывает автоматическое заполнение таблицы, связывающей обычного пользователя с задачами. Автоматическое заполнение происходит на основе данных из другой таблицы и в зависимости от входных данных. 

В теле запроса необходимо передать ```int32 districtAvailable```.
__________________________
### ```GET /User/tasks/cache```
Возвращает JSON коллекцию с содержимым таблицы кеша для обычных пользователей.

#### Возвращаемая структура:

``` 
{
    id	            integer($int64)
    userId	    integer($int64)
    taskId	    integer($int64)
    categoryId	    integer($int64)
}
```
__________________________
### ```POST /User/tasks/cache/aggregation```
Заполняет/обновляет таблицу кеша для обычных пользователей в зависимости от входных данных.

В теле запроса необходимо передать ```int32 allTaskAvailable```.
